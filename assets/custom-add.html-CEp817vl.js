import{_ as c,c as r,b as n,a as p,d as e,w as l,e as a,r as i,o as u}from"./app-BU_Bp1tS.js";const d="/assets/img_5-BmZXl-5s.png",m="/images/%E6%94%B6%E5%89%B2%E6%9C%BA/%E8%87%AA%E5%AE%9A%E4%B9%89/img.png",v="/images/%E6%94%B6%E5%89%B2%E6%9C%BA/%E8%87%AA%E5%AE%9A%E4%B9%89/img_1.png",k="/images/%E6%94%B6%E5%89%B2%E6%9C%BA/%E8%87%AA%E5%AE%9A%E4%B9%89/img_2.png",g="/images/%E6%94%B6%E5%89%B2%E6%9C%BA/%E8%87%AA%E5%AE%9A%E4%B9%89/img_3.png",b="/images/%E6%94%B6%E5%89%B2%E6%9C%BA/%E8%87%AA%E5%AE%9A%E4%B9%89/img_4.png",q={};function h(y,s){const t=i("font"),o=i("RouteLink");return u(),r("div",null,[s[29]||(s[29]=n("h1",{id:"自行适配站点",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#自行适配站点"},[n("span",null,"自行适配站点")])],-1)),s[30]||(s[30]=n("blockquote",null,[n("p",null,"PT站点众多，一个人难以完全收集，全部适配就成了难题，现在开放自定义配置文件功能，各位大佬可以去哔哩哔哩大学简单学习一下Xpath，就可以参照已经有的配置文件自行适配站点了")],-1)),n("blockquote",null,[s[1]||(s[1]=n("h5",{id:"_2025-12-15",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2025-12-15"},[n("span",null,"2025.12.15")])],-1)),e(t,{color:"orange"},{default:l(()=>[...s[0]||(s[0]=[a("更新了搜索时多搜索路径的支持，自定义配置文件时需要配置多个地址",-1)])]),_:1}),s[2]||(s[2]=p(`<div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">page_search = [</span>
<span class="line">  &quot;torrents.php?search={}&quot;, # NP站点基本都支持</span>
<span class="line">  &quot;search.php?search={}&quot;,   # 新站基本都支持</span>
<span class="line">  &quot;special.php?search={}&quot;,  # 站点自定义的特殊页面</span>
<span class="line">  &quot;live.php?search={}&quot;,     # 站点自定义的特殊页面</span>
<span class="line">] # 种子搜索页面，大括号同上</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1))]),s[31]||(s[31]=n("h2",{id:"适配教程",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#适配教程"},[n("span",null,"适配教程")])],-1)),n("ol",null,[s[13]||(s[13]=n("li",null,[n("p",null,"观察站点，注意界面风格与显示效果")],-1)),s[14]||(s[14]=n("li",null,[n("p",null,"找一个风格基本一致的站点作为基础模板来适配新站点")],-1)),s[15]||(s[15]=n("li",null,[n("p",null,"开始适配")],-1)),n("li",null,[s[5]||(s[5]=n("p",null,"适配完成后将配置文件放入 sites 文件夹",-1)),n("blockquote",null,[e(t,{color:"orange"},{default:l(()=>[...s[3]||(s[3]=[a("1. sites 文件夹中的配置文件优先级高于内置配置",-1)])]),_:1}),s[4]||(s[4]=n("p",null,"新功能，可以通过长按站点数据页面的添加按钮打开配置文件上传窗口上传配置文件，且会自动刷新缓存，无需再处理缓存问题，直接点刷新按钮即可",-1))]),s[6]||(s[6]=n("p",null,[n("img",{src:d,alt:"img_5.png"})],-1))]),s[16]||(s[16]=n("li",null,[n("p",null,"清除站点配置缓存或者重启容器")],-1)),n("li",null,[s[12]||(s[12]=n("p",null,"加入收割机助手插件",-1)),n("ol",null,[s[11]||(s[11]=n("li",null,[n("p",null,[a("将下载的插件解压缩，在根目录找到"),n("code",null,"manifest.json"),a("，用文本编辑器（推荐："),n("code",null,"vscode"),a(","),n("code",null,"sublime"),a(","),n("code",null,"MarsCode"),a("等）打开，")]),n("p",null,[a("​ "),n("img",{src:"https://img.ptools.fun/blog/image-20250903172051280.png"})])],-1)),n("li",null,[s[8]||(s[8]=n("p",null,"找到文件中的两个 matches ，随便找一个域名，复制，并将网址改成你适配的站点的网址，保存后重新加载插件即可",-1)),n("blockquote",null,[e(t,{color:"orange"},{default:l(()=>[...s[7]||(s[7]=[a("如果不好找，可以使用格式化功能对文件进行格式化",-1)])]),_:1})]),s[9]||(s[9]=n("p",null,[n("img",{src:m,alt:"img.png"})],-1)),s[10]||(s[10]=n("p",null,[n("img",{src:v,alt:"img_1.png"})],-1))])])])]),s[32]||(s[32]=p(`<h3 id="前置教程" tabindex="-1"><a class="header-anchor" href="#前置教程"><span>前置教程</span></a></h3><p>导出内置站点配置文件</p><ol><li><p>进入 NAS 终端</p></li><li><p>输入命令：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># 格式</span></span>
<span class="line"><span class="token comment"># OPTIONS 表示参数，一般不需要</span></span>
<span class="line"><span class="token comment"># CONTAINER 表示容器名或者容器 Id</span></span>
<span class="line"><span class="token comment"># SRC_PATH 表示源路径</span></span>
<span class="line"><span class="token comment"># DEST_PATH 表示目标路径</span></span>
<span class="line"><span class="token comment"># 从主机复制到docker</span></span>
<span class="line"><span class="token comment"># docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH</span></span>
<span class="line"><span class="token comment"># 从docker复制到主机</span></span>
<span class="line"><span class="token comment"># docker cp [OPTIONS] SRC_PATH|- CONTAINER:DEST_PATH</span></span>
<span class="line"><span class="token comment"># 示例如下 表示从容器的/app/internal下复制所有文件到本地的用户主目录下的 APP 文件夹内，*可以替换为配置文件名称，比如：1pt.toml</span></span>
<span class="line"><span class="token function">docker</span> <span class="token function">cp</span> harvest:/app/internal/* ~/app/ </span>
<span class="line"><span class="token function">docker</span> <span class="token function">cp</span> harvest:/app/internal/1pt.toml ~/app/ </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="使用教程" tabindex="-1"><a class="header-anchor" href="#使用教程"><span>使用教程</span></a></h3><ol><li><p>修改文件与name字段，两者保持一致，比如文件名是：<code>收割机</code>，那么name字段也要是<code>收割机</code><img src="`+k+`" alt="img_2.png"></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">name = &quot;收割机&quot;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>修改域名：删除原有的域名，按照相同的格式填上域名，不要忘记域名后面的<code>/</code></p><div class="language-toml line-numbers-mode" data-highlighter="prismjs" data-ext="toml"><pre><code class="language-toml"><span class="line"><span class="token key property">url</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;https://shougeji.zip/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">]</span> <span class="token comment"># 站点域名，多个域名用\`,\`隔开</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>iyuu字段：如果是IYUU支持的站点，填写本站在IYUU中的站点ID，如果不支持，请填0</p><div class="language-toml line-numbers-mode" data-highlighter="prismjs" data-ext="toml"><pre><code class="language-toml"><span class="line"><span class="token key property">iyuu</span> <span class="token punctuation">=</span> <span class="token number">0</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>检查站点功能开关：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">sign_in = true # 签到开关，无需签到的站点或者无法签到的站点请设置为false</span>
<span class="line">get_info = true # 抓取站点信息</span>
<span class="line">repeat_torrents = true # 辅种，不支持IYUU和PiecesHash辅种的请设置为False</span>
<span class="line">brush_free = true # 免费刷流，未启用，忽略</span>
<span class="line">brush_rss = true # RSS刷流，未启用，忽略</span>
<span class="line">hr_discern = false # 是否开启HR种子下载，未启用功能，忽略</span>
<span class="line">search_torrents = true # 是否支持种子搜索，未启用，忽略</span>
<span class="line">pieces_repeat = true # 是否支持pieces-hash辅种</span>
<span class="line">proxy = true # 站点是否使用代理，为false是自动屏蔽代理</span>
<span class="line">alive = true # 站点存活与否</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>检查各个访问链接是否正确：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">page_index = &quot;index.php&quot; # 主页</span>
<span class="line">page_torrents = &quot;torrents.php?incldead=1&quot; # 种子列表也</span>
<span class="line">page_sign_in = &quot;attendance.php&quot; # 签到页</span>
<span class="line">page_control_panel = &quot;usercp.php&quot; # 控制面板页</span>
<span class="line">page_detail = &quot;details.php?id={}&quot; # 个人主页，大括号不要改，这里会自动填入站点UID</span>
<span class="line">page_download = &quot;download.php?id={}&amp;passkey={}&quot; # 种子下载链接，同上</span>
<span class="line">page_user = &quot;userdetails.php?id={}&quot; # 个人详情页，同上</span>
<span class="line">page_search = [</span>
<span class="line"> &quot;torrents.php?search={}&quot;, # NP站点基本都支持</span>
<span class="line"> &quot;search.php?search={}&quot;,   # 新站基本都支持</span>
<span class="line"> &quot;special.php?search={}&quot;,  # 站点自定义的特殊页面</span>
<span class="line"> &quot;live.php?search={}&quot;,     # 站点自定义的特殊页面</span>
<span class="line">] # 种子搜索页面，大括号同上</span>
<span class="line">page_message = &quot;messages.php&quot; # 短消息页面</span>
<span class="line">page_hr = &quot;myhr.php?hrtype=1&amp;userid={}&quot; # HR页面</span>
<span class="line">page_leeching = &quot;getusertorrentlistajax.php?userid={}&amp;type=leeching&quot; # 吸血中，下载中的种子，未启用</span>
<span class="line">page_uploaded = &quot;getusertorrentlistajax.php?userid={}&amp;type=uploaded&quot; # 上传中的种子 未启用</span>
<span class="line">page_seeding = &quot;getusertorrentlistajax.php?userid={}&amp;type=seeding&quot; # 做种的种子列表</span>
<span class="line">page_completed = &quot;getusertorrentlistajax.php?userid={}&amp;type=completed&quot;  # 已完成的种子列表 未启用</span>
<span class="line">page_mybonus = &quot;mybonus.php&quot; # 魔力详情页</span>
<span class="line">page_viewfilelist = &quot;viewfilelist.php?id={}&quot; # 种子文件列表页，暂未启用</span>
<span class="line">imdb_search = &quot;torrents.php?search_area=4&amp;search={}&quot; # 通过IMDB ID搜索入口</span>
<span class="line">page_pieces_hash_api = &quot;api/pieces-hash&quot; # pieces-hash辅种接口</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>站点信息相关</p><div class="language-toml line-numbers-mode" data-highlighter="prismjs" data-ext="toml"><pre><code class="language-toml"><span class="line"><span class="token key property">my_invitation_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//span/a[contains(@href,&#39;invite.php?id=&#39;)]/following-sibling::text()[1]&quot;</span> <span class="token comment"># 邀请数量</span></span>
<span class="line"><span class="token key property">my_time_join_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//td[contains(text(),&#39;加入&#39;)]/following-sibling::td/span/@title&quot;</span> <span class="token comment"># 注册时间</span></span>
<span class="line"><span class="token key property">my_latest_active_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//td[contains(text(),&#39;最近动向&#39;)]/following-sibling::td/span/@title&quot;</span> <span class="token comment"># 最近访问时间</span></span>
<span class="line"><span class="token key property">my_uploaded_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//font[@class=&#39;color_uploaded&#39;]/following-sibling::text()[1]&quot;</span> <span class="token comment"># 上传量</span></span>
<span class="line"><span class="token key property">my_downloaded_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//font[@class=&#39;color_downloaded&#39;]/following-sibling::text()[1]&quot;</span> <span class="token comment"># 下载量</span></span>
<span class="line"><span class="token key property">my_ratio_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//font[@class=&#39;color_ratio&#39;][1]/following-sibling::text()[1]&quot;</span> <span class="token comment"># 分享率</span></span>
<span class="line"><span class="token key property">my_bonus_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//a[@href=&#39;mybonus.php&#39;]/following-sibling::text()[1]&quot;</span> <span class="token comment"># 魔力值</span></span>
<span class="line"><span class="token key property">my_per_hour_bonus_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//h1[contains(text(),&#39;每小时获得的合计&#39;)]/following::table[1]//tr[2]/td[last()]/text()&quot;</span> <span class="token comment"># 时魔，在魔力页面测试</span></span>
<span class="line"><span class="token key property">my_score_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//td[contains(text(),&#39;分&#39;)]/following-sibling::td/text()[1]&quot;</span> <span class="token comment"># 做种积分</span></span>
<span class="line"><span class="token key property">my_level_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//table[@id=&#39;info_block&#39;]//span/a[contains(@class,&#39;_Name&#39;) and contains(@href,&#39;userdetails.php?id=&#39;)]/@class&quot;</span> <span class="token comment"># 用户等级信息</span></span>
<span class="line"><span class="token key property">my_passkey_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//td[contains(text(),&#39;密钥&#39;)]/following-sibling::td[1]/text()&quot;</span> <span class="token comment"># Passkey密钥，控制面板页面</span></span>
<span class="line"><span class="token key property">my_uid_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//table[@id=&#39;info_block&#39;]//span/a[contains(@class,&#39;_Name&#39;) and contains(@href,&#39;userdetails.php?id=&#39;)]/@href&quot;</span> <span class="token comment"># UID，所有页面</span></span>
<span class="line"><span class="token key property">my_email_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//td[contains(text(),&#39;邮箱&#39;)]/following-sibling::td[1]//text()&quot;</span> <span class="token comment"># 20250505 新增项目，注册邮件地址，一般在控制面板使用，</span></span>
<span class="line"><span class="token key property">my_username_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//table[@id=&#39;info_block&#39;]//span/a[contains(@class,&#39;_Name&#39;) and contains(@href,&#39;userdetails.php?id=&#39;)]/b/text()&quot;</span> <span class="token comment"># 20250505 新增项目，用户名，所有页面</span></span>
<span class="line"><span class="token key property">my_hr_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//a[@href=&#39;myhr.php&#39;]//text()&quot;</span> <span class="token comment"># H&amp;R</span></span>
<span class="line"><span class="token key property">my_leech_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//img[@class=&#39;arrowdown&#39;]/following-sibling::text()[1]&quot;</span> <span class="token comment"># 下载中，吸血中</span></span>
<span class="line"><span class="token key property">my_publish_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//p/preceding-sibling::b/text()[1]&quot;</span> <span class="token comment"># 已发布，未启用</span></span>
<span class="line"><span class="token key property">my_seed_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//img[@class=&#39;arrowup&#39;]/following-sibling::text()[1]&quot;</span> <span class="token comment"># 做种中</span></span>
<span class="line"><span class="token key property">my_seed_vol_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//p/preceding-sibling::div/div/text()[1]&quot;</span> <span class="token comment"># 做种体积，在做种列表页面，部分站点在个人主页</span></span>
<span class="line"><span class="token key property">my_mailbox_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//a[@href=&#39;messages.php&#39;]/font[contains(text(),&#39;条&#39;)]/text()[1]&quot;</span> <span class="token comment"># 邮件提示信息</span></span>
<span class="line"><span class="token key property">my_message_title</span> <span class="token punctuation">=</span> <span class="token string">&quot;//img[@alt=&#39;Unread&#39;]/parent::td/following-sibling::td/a[1]//text()&quot;</span> <span class="token comment"># 短消息标题</span></span>
<span class="line"><span class="token key property">my_notice_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//a[@href=&#39;index.php&#39;]/font[contains(text(),&#39;条&#39;)]/text()[1]&quot;</span> <span class="token comment"># 公告提示消息</span></span>
<span class="line"><span class="token key property">my_notice_title</span> <span class="token punctuation">=</span> <span class="token string">&quot;//td[@class=&#39;text&#39;]/div/a//text()&quot;</span> <span class="token comment"># 公告标题</span></span>
<span class="line"><span class="token key property">my_notice_content</span> <span class="token punctuation">=</span> <span class="token string">&quot;//td[@class=&#39;text&#39;]/div/a/following-sibling::div&quot;</span> <span class="token comment"># 公告内容</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>种子列表相关</p><div class="language-toml line-numbers-mode" data-highlighter="prismjs" data-ext="toml"><pre><code class="language-toml"><span class="line"><span class="token key property">torrents_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//table[@class=&#39;torrents&#39;]/tr&quot;</span> <span class="token comment"># 种子列表，测试时看到的数字应该与当前页面的种子数量一致</span></span>
<span class="line"><span class="token key property">torrent_title_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;.//td[@class=&#39;embedded&#39;]/a/b/text()&quot;</span> <span class="token comment"># 种子标题</span></span>
<span class="line"><span class="token key property">torrent_subtitle_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;.//a[contains(@href,&#39;detail&#39;)]/parent::td/text()[last()]&quot;</span> <span class="token comment"># 副标题</span></span>
<span class="line"><span class="token key property">torrent_detail_url_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;.//td[@class=&#39;embedded&#39;]/a[contains(@href,&#39;detail&#39;)]/@href&quot;</span> <span class="token comment"># 详情链接</span></span>
<span class="line"><span class="token key property">torrent_category_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;.//td[@class=&#39;rowfollow nowrap&#39;][1]/a[1]/img/@title&quot;</span> <span class="token comment"># 种子分类</span></span>
<span class="line"><span class="token key property">torrent_poster_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;.//table/tr/td[1]/img/@src&quot;</span> <span class="token comment"># 海报</span></span>
<span class="line"><span class="token key property">torrent_magnet_url_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;.//td/a[contains(@href,&#39;download.php?id=&#39;)]/@href&quot;</span> <span class="token comment"># 下载链接</span></span>
<span class="line"><span class="token key property">torrent_size_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;.//td[5]/text()&quot;</span> <span class="token comment"># 种子大小</span></span>
<span class="line"><span class="token key property">torrent_progress_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;.//div[contains(@title,&#39;ing&#39;)]/@title&quot;</span> <span class="token comment"># 下载进度</span></span>
<span class="line"><span class="token key property">torrent_hr_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;.//table/tr/td/img[@class=&#39;hitandrun&#39;]/@title&quot;</span> <span class="token comment"># HR</span></span>
<span class="line"><span class="token key property">torrent_sale_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;.//img[contains(@class,&#39;free&#39;)]/@alt&quot;</span> <span class="token comment"># 免费促销信息</span></span>
<span class="line"><span class="token key property">torrent_sale_expire_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;.//img[contains(@class,&#39;free&#39;)]/following-sibling::font/span/@title&quot;</span> <span class="token comment"># 促销到期时间</span></span>
<span class="line"><span class="token key property">torrent_release_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;.//td[4]/span/@title&quot;</span> <span class="token comment"># 发布时间</span></span>
<span class="line"><span class="token key property">torrent_seeders_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;.//a[contains(@href,&#39;#seeders&#39;)]/text()&quot;</span> <span class="token comment"># 做种人数</span></span>
<span class="line"><span class="token key property">torrent_leechers_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;.//a[contains(@href,&#39;#leechers&#39;)]/text()&quot;</span> <span class="token comment"># 下载人数</span></span>
<span class="line"><span class="token key property">torrent_completers_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;.//a[contains(@href,&#39;viewsnatches&#39;)]//text()&quot;</span> <span class="token comment"># 完成人数</span></span>
<span class="line"><span class="token key property">torrent_tags_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;.//a[contains(@href,&#39;detail&#39;)]/../span[contains(@class,&#39;tags&#39;)]/text()&quot;</span> <span class="token comment"># 种子标签</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>种子详情页相关</p><div class="language-toml line-numbers-mode" data-highlighter="prismjs" data-ext="toml"><pre><code class="language-toml"><span class="line"><span class="token key property">detail_title_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//h1/text()[1]&quot;</span> <span class="token comment"># 种子标签</span></span>
<span class="line"><span class="token key property">detail_subtitle_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//td[contains(text(),&#39;副标题&#39;)]/following-sibling::td/text()[1]&quot;</span> <span class="token comment"># 副标题</span></span>
<span class="line"><span class="token key property">detail_download_url_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//td[contains(text(),&#39;种子链接&#39;)]/following-sibling::td/a/@href[1]&quot;</span> <span class="token comment"># 下载链接</span></span>
<span class="line"><span class="token key property">detail_size_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//td//b[contains(text(),&#39;大小&#39;)]/following::text()[1]&quot;</span>  <span class="token comment"># 种子大小</span></span>
<span class="line"><span class="token key property">detail_category_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//td/b[contains(text(),&#39;类型&#39;)]/following-sibling::text()[1]&quot;</span> <span class="token comment"># 种子分类</span></span>
<span class="line"><span class="token key property">detail_count_files_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//td/b[contains(text(),&#39;文件数&#39;)]/following-sibling::text()[1]&quot;</span> <span class="token comment"># 资源文件数目</span></span>
<span class="line"><span class="token key property">detail_hash_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//td/b[contains(text(),&#39;Hash&#39;)]/following-sibling::text()[1]&quot;</span> <span class="token comment"># 种子 hash</span></span>
<span class="line"><span class="token key property">detail_free_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//h1/b/font/@class&quot;</span> <span class="token comment"># 促销</span></span>
<span class="line"><span class="token key property">detail_free_expire_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//h1/b/span/@title&quot;</span> <span class="token comment"># 促销到期时间</span></span>
<span class="line"><span class="token key property">detail_douban_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//td/a[starts-with(@href,&#39;https://movie.douban.com/subject/&#39;)][1]&quot;</span> <span class="token comment"># 豆瓣链接</span></span>
<span class="line"><span class="token key property">detail_imdb_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//a[@class=&#39;faqlink&#39; and starts-with(@href,&#39;https://www.imdb.com/title/&#39;)]/@href&quot;</span> <span class="token comment"># imdb链接</span></span>
<span class="line"><span class="token key property">detail_poster_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//td/a/span[contains(text(),&#39;简介&#39;)]/../../following-sibling::td//img[1]/@src&quot;</span> <span class="token comment"># 海报</span></span>
<span class="line"><span class="token key property">detail_tags_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//td[contains(text(),&#39;标签&#39;)]/following-sibling::td//text()&quot;</span> <span class="token comment"># 标签</span></span>
<span class="line"><span class="token key property">detail_hr_rule</span> <span class="token punctuation">=</span> <span class="token string">&quot;//h1/img[@class=&#39;hitandrun&#39;]/@title&quot;</span> <span class="token comment"># HR</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>用户等级信息</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">[level.User] # 固定格式 level.用户等级</span>
<span class="line">level_id = 1 # 用户等级ID，从1开始逐级+1</span>
<span class="line">level = &quot;User&quot; # 等级名称，与level.后面保持一致</span>
<span class="line">days = 0 # 升级所需周数</span>
<span class="line">uploaded = &quot;0&quot; # 升级所需上传量，格式：120GB，1024GB，3TB</span>
<span class="line">downloaded = &quot;0&quot; # 升级所需下载量，格式同上</span>
<span class="line">bonus = 0.0 # 升级所需魔力，整数的后面加上.0</span>
<span class="line">score = 0 # 升级所需做种积分</span>
<span class="line">ratio = 0.0 # 升级所需分享率</span>
<span class="line">torrents = 0 # 发种数目</span>
<span class="line">leeches = 0 # 做中暑</span>
<span class="line">seeding_delta = 0.0 # 做种</span>
<span class="line">keep_account = false # 是否达到保留账号等级</span>
<span class="line">graduation = false # 是否毕业</span>
<span class="line">rights = &quot;新用户的默认级别。只能在每周六中午12点至每周日晚上11点59分发布种子。&quot; # 当前等级的权益</span>
<span class="line"></span>
<span class="line">[level.VIP] # VIP等级基本可以保持不动，按照站点信息修改等级权益即可</span>
<span class="line">level_id = 0</span>
<span class="line">level = &quot;VIP&quot;</span>
<span class="line">days = 0</span>
<span class="line">uploaded = &quot;0&quot;</span>
<span class="line">downloaded = &quot;0&quot;</span>
<span class="line">bonus = 0.0</span>
<span class="line">score = 0</span>
<span class="line">ratio = 0.0</span>
<span class="line">torrents = 0</span>
<span class="line">leeches = 0</span>
<span class="line">seeding_delta = 0.0</span>
<span class="line">keep_account = true</span>
<span class="line">graduation = true</span>
<span class="line">rights = &quot;1.VIP贵宾会员期限内不受系统分享率限制，可以在贵宾期限内无限制下载。可以在贵宾期限内无视H&amp;R规则，畅快下载；2.VIP贵宾会员期限内不会因分享率过低而被系统封禁，免除自动降级，贵宾期限内不计算下行流量；3.VIP贵宾会员期限内开启排行榜查看权限；4.VIP贵宾会员期限内无视每年的年终考核和年中考核；5.拥有捐赠者黄星标识的会员，每小时做种获取魔力值双倍的奖励。&quot;</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="xpath调试教程" tabindex="-1"><a class="header-anchor" href="#xpath调试教程"><span>xpath调试教程</span></a></h2><ol><li><p>F12打开开发者工具，选择元素选项，在内容上点一下</p><p><img src="`+g+'" alt="img_3.png"></p></li><li><p>ctrl+F或者command+F打开查找框</p><p><img src="'+b+'" alt="img_4.png"></p></li><li><p>把XPATH规则填入进去按回车，后面会显示当前找到了几条元素，如果是1/1，恭喜，规则可以用，如果是0就是没找到，有很多条就是有很多规则相同的元素，需要自行分析一下修改规则，上面示例中就是在种子详情页获取种子下载链接的Xpath（获取页面中的a链接的网址，指定a链接的网址中包含download.php和passkey字段）</p></li></ol><blockquote><p>tips：</p></blockquote>',8)),n("blockquote",null,[e(t,{color:"red"},{default:l(()=>[...s[17]||(s[17]=[a("xpath查找时，浏览器要识别tbody，代码中需要将tbody去掉",-1)])]),_:1})]),n("blockquote",null,[e(t,{color:"orange"},{default:l(()=>[...s[18]||(s[18]=[a("`/`表示从根节点开始",-1)])]),_:1}),e(t,{color:"orange"},{default:l(()=>[...s[19]||(s[19]=[a("`//`开始表示全文查找",-1)])]),_:1}),e(t,{color:"orange"},{default:l(()=>[...s[20]||(s[20]=[a("`./`代表当前节点开始找",-1)])]),_:1}),e(t,{color:"orange"},{default:l(()=>[...s[21]||(s[21]=[a("上一个是 `preceding-sibling::`",-1)])]),_:1}),e(t,{color:"orange"},{default:l(()=>[...s[22]||(s[22]=[a("下一个是 `following-sibling::`",-1)])]),_:1})]),s[33]||(s[33]=n("h2",{id:"自行测试",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#自行测试"},[n("span",null,"自行测试")])],-1)),n("ol",null,[n("li",null,[s[24]||(s[24]=a("修改容器日志等级为DEBUG，参考开启调试后台：",-1)),e(o,{to:"/%E6%94%B6%E5%89%B2%E6%9C%BA/common.html#%E8%BF%9B%E5%85%A5%E8%B0%83%E8%AF%95%E5%90%8E%E5%8F%B0"},{default:l(()=>[...s[23]||(s[23]=[a("开启调试后台",-1)])]),_:1})]),s[25]||(s[25]=n("li",null,"将配置文件放入映射的sites文件夹中",-1)),s[26]||(s[26]=n("li",null,"清理站点配置缓存",-1)),s[27]||(s[27]=n("li",null,"添加站点",-1)),s[28]||(s[28]=n("li",null,"签到，更新数据来一套，同时注意观察docker实时日志，找到出错的字段，然后修改",-1))])])}const f=c(q,[["render",h]]),x=JSON.parse('{"path":"/%E6%94%B6%E5%89%B2%E6%9C%BA/custom-add.html","title":"08. 自行适配","lang":"zh-CN","frontmatter":{"title":"08. 自行适配","description":null,"published":true,"date":"2025-12-01T04:40:48.220Z","tags":[],"editor":"markdown","dateCreated":"2025-04-14T08:59:18.445Z"},"git":{"updatedTime":1768227904000,"contributors":[{"name":"ngfchl","username":"ngfchl","email":"ngfchl@126.comn","commits":5,"url":"https://github.com/ngfchl"}],"changelog":[{"hash":"238ba32baeda9404148a4ada11f8f689cb2d611e","time":1768227904000,"email":"ngfchl@126.com","author":"ngfchl","message":"add. 增加站点配置文件上传说明"},{"hash":"a37f849f8a2b0dabd530a7562c498d07876c2caf","time":1765974727000,"email":"ngfchl@126.comn","author":"ngfchl","message":"update. 优化部分页面显示效果"},{"hash":"b175d62d7253d0f255f61bb9adea8bcffba18bbd","time":1765785319000,"email":"ngfchl@126.com","author":"ngfchl","message":"update. 更新自定义站点搜索多路径"},{"hash":"f894e43acd7de7024d5ca15292faf31464845311","time":1764678022000,"email":"ngfchl@126.com","author":"ngfchl","message":"update. 更新收割机自定义适配站点教程"},{"hash":"56c3f531a9052269a7b1bd4db933e0391a432f06","time":1764639663000,"email":"ngfchl@126.comn","author":"ngfchl","message":"add. 添加已有文档"}]},"filePathRelative":"收割机/custom-add.md"}');export{f as comp,x as data};
